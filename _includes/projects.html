<section id="projects" class="projects">
  <div style="height: 71px"></div>
  {% if include.service == null %}
    <div class="filter">
      <div class="container">
        <a data-filter="all">All</a>
        {% for service in site.services %}
          <a data-filter="{{ service.name | slugify }}">{{ service.name }}</a>
        {% endfor %}
      </div>
    </div>
  {% endif %}
  <div class="items">
    {% if include.service != null %}
      {% assign projects = site.projects | where: 'service', include.service  %}
    {% else %}
      {% assign projects = site.projects %}
    {% endif %}
    {% for project in projects %}
      <a href="{{ project.url }}" class="project item" data-service="{{ project.service }}">
        <div class="background">
          <div class="image"><img src="{{ project.image }}" data-src="{{ project.image }}" /></div>
        </div>
        <div class="content">
          <h3>{{ project.name }}</h3>
          <i></i>
          <p>{{ project.teaser }}</p>
          {% include circle-plus.svg %}
        </div>
      </a>
    {% endfor %}
  </div>
</section>


<script type="text/javascript">
  var projects = function () {

    $('section.projects .items img').unveil()

    // add and remove project animation classes
    $('section.projects svg').addClass('animated').addClass('rotateOut')
    $('section.projects a').hover(function () {
      $(this).find('svg').removeClass('rotateOut').addClass('rotateIn')
    }, function () {
      $(this).find('svg').removeClass('rotateIn').addClass('rotateOut')
    })

    // project filters
    $('section.projects .item').each(function () { $(this).addClass('show') })
    $('[data-filter]').click(function () {
      var filter = $(this).attr('data-filter')
      $('[data-service]').each(function () { $(this).removeClass('show') })
      if (filter === 'all') {
        $('[data-service]').each(function () { $(this).addClass('show') })
      } else {
        $('[data-service=' + filter + ']').each(function () { $(this).addClass('show') })
      }
    })

  }

  document.addEventListener('DOMContentLoaded', projects, false);
</script>